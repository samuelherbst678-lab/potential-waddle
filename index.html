<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Parlament Dashboard – editierbar</title>

<style>
:root{
  --bg:#000;
  --card:#1c1c1e;
  --text:#fff;
  --muted:#9e9ea4;
  --row:#111;
  --input:#0f0f10;
  --inputBorder:rgba(255,255,255,.14);
  --btn:rgba(255,255,255,.10);
}
*{ box-sizing:border-box; font-family:-apple-system,BlinkMacSystemFont,"SF Pro Display",system-ui,Segoe UI,Roboto,Arial,sans-serif; }
body{
  margin:0; background:var(--bg); color:var(--text);
  display:flex; justify-content:center;
}
.container{ width:390px; padding:16px; }
.card{
  background:var(--card); border-radius:16px; padding:16px;
  margin-bottom:16px; border:1px solid rgba(255,255,255,.06);
}
.card h2{ margin:0 0 12px 0; font-size:22px; font-weight:800; }
.label{ color:var(--muted); font-size:14px; margin:12px 0 6px; }
.row{
  display:flex; align-items:center; gap:12px;
  padding:12px; border-radius:12px; background:var(--row);
  margin-bottom:10px;
}
.avatar{ width:36px; height:36px; border-radius:50%; background:#444; }
.name{ font-size:18px; font-weight:800; }
.sub{ font-size:14px; color:var(--muted); }

.parliament{ display:flex; justify-content:center; }
svg{ display:block; }

.legend{ display:flex; gap:8px; margin-top:10px; }
.legend-item{ flex:1; text-align:center; }
.badge{
  padding:6px; border-radius:8px; font-weight:900;
  color:#000; white-space:nowrap;
}
.num{ margin-top:6px; font-weight:900; }

.bar-row{
  display:grid; grid-template-columns:110px 1fr 50px;
  gap:10px; align-items:center; margin:10px 0;
}
.bar{ display:flex; gap:6px; }
.block{
  width:44px; height:28px; border-radius:8px;
  border:1px solid rgba(255,255,255,.1);
}

input,select,button{
  width:100%; height:38px; border-radius:10px;
  border:1px solid var(--inputBorder);
  background:var(--input); color:#fff; font-weight:700;
}
input[type="color"]{ padding:0; }
button{ background:var(--btn); cursor:pointer; }
.small{ font-size:12px; color:#aaa; }

.table{ width:100%; border-spacing:0 6px; }
.partyRow td{ padding:4px; }

.iconBtn{
  width:36px; height:36px; border-radius:10px;
}
</style>
</head>

<body>
<div class="container">

<div class="card">
  <h2>Regierung</h2>
  <div class="row">
    <div class="avatar" id="leader-avatar"></div>
    <div>
      <div class="name" id="leader-name"></div>
      <div class="sub" id="leader-title"></div>
    </div>
  </div>
  <div id="gov-parties"></div>
</div>

<div class="card">
  <h2>Parlament</h2>
  <div class="parliament">
    <svg id="parliamentSvg"></svg>
  </div>
  <div class="label">Sitze gesamt: <span id="seat-count"></span></div>
  <div class="legend" id="legend"></div>
</div>

<div class="card">
  <h2>Regierung & Opposition</h2>
  <div class="bar-row">
    <div>Regierung</div>
    <div class="bar" id="gov-bar"></div>
    <div id="gov-count"></div>
  </div>
  <div class="bar-row">
    <div>Opposition</div>
    <div class="bar" id="opp-bar"></div>
    <div id="opp-count"></div>
  </div>
</div>

<div class="card">
  <h2>Editor</h2>

  <div class="label">Regierungschef</div>
  <input id="editLeaderName" placeholder="Name">
  <input id="editLeaderTitle" placeholder="Amt">
  <input id="editLeaderColor" type="color">

  <div class="label">Parlament</div>
  <input id="editParliamentSize" type="number">

  <label class="small">Halbkreis Dicke</label>
  <input id="editThickness" type="range" min="20" max="120">

  <label class="small">Halbkreis Größe</label>
  <input id="editRadius" type="range" min="90" max="190">

  <label class="small">Diagramm vertikal verschieben</label>
  <input id="editYOffset" type="range" min="-80" max="80">

  <div class="label">Parteien</div>
  <table class="table">
    <tbody id="partyTableBody"></tbody>
  </table>

  <button id="addPartyBtn">+ Partei</button>
</div>

</div>

<script>
const DEFAULT_STATE = {
  leader:{ name:"Markus Söder", title:"Ministerpräsident", color:"#444444" },
  parliamentSize:203,
  radius:140,
  thickness:72,
  yOffset:0,
  separator:3,
  parties:[
    { name:"Grüne", seats:32, color:"#0a8f08", gov:false },
    { name:"SPD", seats:17, color:"#e00000", gov:false },
    { name:"CSU", seats:85, color:"#000000", gov:true },
    { name:"FW", seats:37, color:"#ff9500", gov:true },
    { name:"AfD", seats:32, color:"#7dd3ff", gov:false }
  ]
};

let state = structuredClone(DEFAULT_STATE);
const $ = id=>document.getElementById(id);

function polar(cx,cy,r,a){
  return { x:cx+r*Math.cos(a), y:cy+r*Math.sin(a) };
}
function donut(cx,cy,rO,rI,a1,a2){
  const p1=polar(cx,cy,rO,a1), p2=polar(cx,cy,rO,a2);
  const p3=polar(cx,cy,rI,a2), p4=polar(cx,cy,rI,a1);
  return `M ${p1.x} ${p1.y}
          A ${rO} ${rO} 0 0 0 ${p2.x} ${p2.y}
          L ${p3.x} ${p3.y}
          A ${rI} ${rI} 0 0 1 ${p4.x} ${p4.y} Z`;
}

function renderParliamentSvg(){
  const svg=$("parliamentSvg"); svg.innerHTML="";
  const r=state.radius, rI=r-state.thickness;
  const pad=20;
  const cx=r+pad, cy=r+pad+state.yOffset;
  svg.setAttribute("width",2*r+pad*2);
  svg.setAttribute("height",r+pad*2);

  let a=Math.PI;
  state.parties.forEach(p=>{
    const d=(p.seats/state.parliamentSize)*Math.PI;
    const path=document.createElementNS("http://www.w3.org/2000/svg","path");
    path.setAttribute("d",donut(cx,cy,r,rI,a,a-d));
    path.setAttribute("fill",p.color);
    path.setAttribute("stroke","#fff");
    path.setAttribute("stroke-width",state.separator);
    svg.appendChild(path);
    a-=d;
  });
}

function render(){
  $("leader-name").textContent=state.leader.name;
  $("leader-title").textContent=state.leader.title;
  $("leader-avatar").style.background=state.leader.color;
  $("seat-count").textContent=state.parliamentSize;

  renderParliamentSvg();

  const legend=$("legend"); legend.innerHTML="";
  state.parties.forEach(p=>{
    legend.innerHTML+=`<div class="legend-item">
      <div class="badge" style="background:${p.color}">${p.name}</div>
      <div class="num">${p.seats}</div></div>`;
  });

  $("gov-bar").innerHTML="";
  $("opp-bar").innerHTML="";
  let gov=0;
  state.parties.forEach(p=>{
    const b=document.createElement("div");
    b.className="block"; b.style.background=p.color;
    p.gov ? $("gov-bar").appendChild(b) : $("opp-bar").appendChild(b);
    if(p.gov) gov+=p.seats;
  });
  $("gov-count").textContent=gov;
  $("opp-count").textContent=state.parliamentSize-gov;

  const body=$("partyTableBody"); body.innerHTML="";
  state.parties.forEach((p,i)=>{
    body.innerHTML+=`
      <tr class="partyRow">
        <td><input value="${p.name}" oninput="state.parties[${i}].name=this.value;renderParliamentSvg()"></td>
        <td><input type="color" value="${p.color}" oninput="state.parties[${i}].color=this.value;renderParliamentSvg()"></td>
        <td><input type="number" value="${p.seats}" oninput="state.parties[${i}].seats=+this.value;renderParliamentSvg()"></td>
      </tr>`;
  });
}

$("editLeaderName").oninput=e=>{state.leader.name=e.target.value;$("leader-name").textContent=e.target.value;}
$("editLeaderTitle").oninput=e=>{state.leader.title=e.target.value;$("leader-title").textContent=e.target.value;}
$("editLeaderColor").oninput=e=>{state.leader.color=e.target.value;$("leader-avatar").style.background=e.target.value;}
$("editParliamentSize").oninput=e=>{state.parliamentSize=+e.target.value;renderParliamentSvg();}
$("editThickness").oninput=e=>{state.thickness=+e.target.value;renderParliamentSvg();}
$("editRadius").oninput=e=>{state.radius=+e.target.value;renderParliamentSvg();}
$("editYOffset").oninput=e=>{state.yOffset=+e.target.value;renderParliamentSvg();}

$("addPartyBtn").onclick=()=>{
  state.parties.push({name:"Neu",seats:0,color:"#888",gov:false});
  render();
};

render();
</script>
</body>
</html>
